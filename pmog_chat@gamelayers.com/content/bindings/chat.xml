<?xml version="1.0"?>
<!DOCTYPE bindings PUBLIC "-//MOZILLA//DTD XBL V1.0//EN" "http://www.mozilla.org/xbl">

<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="chat-panel">
    <content orient="vertical">
      <xul:notificationbox anonid="chatTopic">
        <xul:notification anonid="topicContent" type="info" xbl:inherits="image=icon, label" image="https://developer.mozilla.org/favicon.ico" />
      </xul:notificationbox>
      <xul:scrollbox anonid="contentScroll" class="chat-output" flex="1">
        <!-- <xul:notificationbox anonid="chatTopic" flex="1" display="block">
          <xul:notification anonid="topicContent" type="info" xbl:inherits="image=icon, label" image="https://developer.mozilla.org/favicon.ico" />
        </xul:notificationbox> -->
        <children />
        <xul:label class="chat_cursor" />
      </xul:scrollbox>
    </content>
    
    <resources>
      <stylesheet src="chrome://pmog_chat/skin/irc.css" />
    </resources>
    
    <implementation>
      <field name="_contentBox">
        document.getAnonymousElementByAttribute(this, 'anonid', 'contentScroll');
      </field>
      
      <field name="_topicContent">
        document.getAnonymousElementByAttribute(this, 'anonid', 'topicContent');
      </field>
      
      <field name="contentBoxObject">
        this._contentBox.boxObject.QueryInterface(Components.interfaces.nsIScrollBoxObject);
      </field>
      
      <field name="notificationBox">
        document.getAnonymousElementByAttribute(this, 'anonid', 'chatTopic');
      </field>
      
      <property name="topicIcon" onget="return this._topicContent.image"
                                 onset="this._topicContent.image = val;" />
                                 
      <property name="topic" onget="return this._topicContent.label;"
                             onset="this._setTopic(val);" />
      
      <method name="_setTopic">
        <parameter name="topic" />
        <body>
          <![CDATA[
            this._topicContent.label = topic;
          ]]>
        </body>
      </method>
    </implementation>
    
    <handlers>
    </handlers>
  </binding>

</bindings>